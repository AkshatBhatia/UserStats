<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Userstats by AkshatBhatia</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Userstats</h1>
      <h2 class="project-tagline">This is a Web app that provides a framework for visualization of data from various 3rd party resources like Twitter, Gmail etc.</h2>
      <a href="https://github.com/AkshatBhatia/UserStats" class="btn">View on GitHub</a>
      <a href="https://github.com/AkshatBhatia/UserStats/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/AkshatBhatia/UserStats/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="userstats" class="anchor" href="#userstats" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>UserStats</h1>

<p>This is a Web app that provides a framework for visualization of data from various 3rd party resources like Twitter, Gmail etc.</p>

<p>Currently this repository only provides a way to analyze twitter stats. In future there are plans to add email stats, linkedin stats, facebook stats etc as well. </p>

<p>The backend of the project provides REST APIs to fetch the stats of data from 3rd party services. The backend dependencies are: </p>

<ul>
<li>Django</li>
<li>Django rest framework </li>
<li>Tweepy</li>
<li>NLTK</li>
</ul>

<p>The frontend is a single page application. The dependencies for front end are:</p>

<ul>
<li>Backbone js</li>
<li>D3.js</li>
<li>Bootstrap</li>
</ul>

<p>To manage python dependencies we use virtualenv and pip. If you are not familiar with those tools below is a good read:
<a href="http://www.dabapps.com/blog/introduction-to-pip-and-virtualenv-python/">http://www.dabapps.com/blog/introduction-to-pip-and-virtualenv-python/</a></p>

<p>To test this webapp locally (tested on mac), go throught the following steps:</p>

<ul>
<li>You need to create your own twitter app. Goto <a href="https://apps.twitter.com/">https://apps.twitter.com/</a> to create one. 
Set your callback url to <a href="http://127.0.0.1:8000/twitterstats/auth">http://127.0.0.1:8000/twitterstats/auth</a>
</li>
<li>Install Mysql server on your local machine and create a userstats database.</li>
<li>Add mysql to your path. Usually its found in /usr/local/mysql/bin. export PATH=$PATH:/usr/local/mysql/bin</li>
<li>virtualenv userstats</li>
<li>pip install -r requirements.txt
: Note that sometimes you might see failures when installing MYSQL_python, because it unable to find mysql config.
To resolve that issue, make sure mysql is in your path. If the issue persists, checkout <a href="http://stackoverflow.com/questions/5178292/pip-install-mysql-python-fails-with-environmenterror-mysql-config-not-found">http://stackoverflow.com/questions/5178292/pip-install-mysql-python-fails-with-environmenterror-mysql-config-not-found</a>
</li>
<li>sudo install_name_tool -change libmysqlclient.18.dylib /usr/local/mysql/lib/libmysqlclient.18.dylib $VIRTUAL_ENV/lib/python2.7/site-packages/_mysql.so</li>
<li>Copy settings_local.template to settings_local.py</li>
<li>Insert the correct consumer_token and consumer_secret in settings_local.py.</li>
<li>Fill in all the required fields for Database settings in setting_local.py.</li>
<li>Setup proper permissions on your mysql directory
:sudo chown -R mysql:mysql /usr/local/mysql/
sudo chmod -R 755 /usr/local/mysql/</li>
<li>brew install memcached</li>
<li>run memcached</li>
<li>run python manage.py migrate</li>
<li>run python manage.py runserver</li>
</ul>

<p>To test the server hit the url:</p>

<p>localhost:8000/twitterstats/tweets</p>

<p>You should see some stats about your latest tweets. Try typing elonmusk in the search box and see the changes.</p>

<p>Serving content via nginx.
For this project we have decided to use nginx as our web server. Following are the steps to enable nginx on your development box.</p>

<ul>
<li>Make sure pip list show that uWSGI is installed as a dependency. It is part of requirements.txt and should have been installed already. If not install it.</li>
<li>Make sure homebrew is installed.</li>
<li>In your twitter app, change your callback url to <a href="http://127.0.0.1/twitterstats/auth">http://127.0.0.1/twitterstats/auth</a>.</li>
<li>brew install nginx. 
Note: This installs nginx under /usr/local/Cellar/nginx directory.</li>
<li>Change all the paths in userstats_nginx.conf to point to your project directory.</li>
<li>Run command python manage.py collectstatic. This should create a static folder in your root project directory.</li>
<li>If a site_enabled directory does not exist under nginx, create one. The location should be similar to /usr/local/Cellar/nginx/1.8.0/sites_enabled.</li>
<li>sudo ln -s ~/path/to/your/userstats/userstats_nginx.conf /usr/local/Cellar/nginx/1.8.0/sites_enabled/</li>
<li>Edit nginx.conf located at /usr/local/etc/nginx/nginx.conf:
Remove the entire server configuraton under http. Instead add "include /usr/local/Cellar/nginx/1.8.0/sites_enabled/*;"</li>
<li>from userstats virtual env start uwsgi using command: uwsgi --socket userstats.sock --module userstats.wsgi --chmod-socket=666</li>
<li>sudo nginx</li>
</ul>

<p>to test: goto usr localhost/twitterstats</p>

<p>If nginx does not work, you can try to debug the issue by looking at logs located at:
/usr/local/Cellar/nginx/1.8.0/logs/error.log</p>

<p>This project is hosted live at:
<a href="http://ec2-54-69-110-112.us-west-2.compute.amazonaws.com/twitterstats">http://ec2-54-69-110-112.us-west-2.compute.amazonaws.com/twitterstats</a></p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/AkshatBhatia/UserStats">Userstats</a> is maintained by <a href="https://github.com/AkshatBhatia">AkshatBhatia</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
